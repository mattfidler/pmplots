<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>pmplots • pmplots</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="pmplots">
<meta property="og:description" content="pmplots">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pmplots</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/pmplots.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/customize.html">Customizing Plots</a>
    </li>
    <li>
      <a href="../articles/dv.html">Dependent Variable Plots</a>
    </li>
    <li>
      <a href="../articles/eta.html">ETA Plots</a>
    </li>
    <li>
      <a href="../articles/list_plots.html">Vectorized Plots</a>
    </li>
    <li>
      <a href="../articles/npde_plots.html">NPDE Plots</a>
    </li>
    <li>
      <a href="../articles/residual_plots.html">Residual Plots</a>
    </li>
    <li>
      <a href="../articles/wrapped_plots.html">Wrapped / Faceted Plots</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>pmplots</h1>
                        <h4 class="author">Kyle Baron</h4>
            
            <h4 class="date">2020-06-30</h4>
      
      
      <div class="hidden name"><code>pmplots.Rmd</code></div>

    </div>

    
    
<div id="set-up" class="section level1">
<h1 class="hasAnchor">
<a href="#set-up" class="anchor"></a>Set up</h1>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pmplots</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)</pre></body></html></div>
</div>
<div id="example-data" class="section level1">
<h1 class="hasAnchor">
<a href="#example-data" class="anchor"></a>Example data</h1>
<p>There is an example data set embedded in pmplots</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/pmplots_data.html">pmplots_data_obs</a></span>()</pre></body></html></div>
<p>pmplots is designed to work with data sets that have columns named according to certain expectations. So we tend to look for these types of columns</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">data</span>, <span class="no">ID</span>, <span class="no">TIME</span>, <span class="no">DV</span>, <span class="no">IPRED</span>, <span class="no">ETA1</span>, <span class="no">CWRESI</span>)</pre></body></html></div>
<pre><code>## # A tibble: 3,142 x 6
##       ID  TIME    DV IPRED    ETA1  CWRESI
##    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1     1  0.61  61.0  69.5 -0.0753 -0.621 
##  2     1  1.15  91.0  91.2 -0.0753  0.0895
##  3     1  1.73 122.   97.1 -0.0753  1.60  
##  4     1  2.15 126.   96.2 -0.0753  1.89  
##  5     1  3.19  84.7  88.0 -0.0753 -0.0970
##  6     1  4.21  62.1  78.3 -0.0753 -1.06  
##  7     1  5.09  49.1  70.7 -0.0753 -1.60  
##  8     1  6.22  64.2  62.1 -0.0753  0.214 
##  9     1  8.09  59.6  51.0 -0.0753  0.891 
## 10     1 12.0   45.3  36.0 -0.0753  1.28  
## # … with 3,132 more rows</code></pre>
<p>You might already have NONMEM modeling results with these column names. When the data set has these names, pmplots will work more automatically with the data set, requiring less manual input from the user.</p>
<p>Other columns that we have in the examples can be named according to your choosing</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">data</span>, <span class="no">WT</span>, <span class="no">ALB</span>, <span class="no">STUDY</span>, <span class="no">STUDYc</span>, <span class="no">CRCL</span>)</pre></body></html></div>
<pre><code>## # A tibble: 3,142 x 5
##       WT   ALB STUDY STUDYc  CRCL
##    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;fct&gt;  &lt;dbl&gt;
##  1  55.2   4.4     1 SAD     114.
##  2  55.2   4.4     1 SAD     114.
##  3  55.2   4.4     1 SAD     114.
##  4  55.2   4.4     1 SAD     114.
##  5  55.2   4.4     1 SAD     114.
##  6  55.2   4.4     1 SAD     114.
##  7  55.2   4.4     1 SAD     114.
##  8  55.2   4.4     1 SAD     114.
##  9  55.2   4.4     1 SAD     114.
## 10  55.2   4.4     1 SAD     114.
## # … with 3,132 more rows</code></pre>
</div>
<div id="your-first-plot" class="section level1">
<h1 class="hasAnchor">
<a href="#your-first-plot" class="anchor"></a>Your first plot</h1>
<p>With the data setup like this, we can make a plot of DV versus PRED very easily</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="../reference/dv_pred.html">dv_pred</a></span>(<span class="no">data</span>)</pre></body></html></div>
<pre><code>## `geom_smooth()` using formula 'y ~ x'</code></pre>
<p><img src="pmplots_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>This plots <code>dv</code> versus <code>pred</code> and the name of the function indicates what will come out. pmplots can make this plot because there are columns called <code>DV</code> and <code>PRED</code> in the data set</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">data</span>, <span class="no">DV</span>, <span class="no">PRED</span>)</pre></body></html></div>
<pre><code>## # A tibble: 3,142 x 2
##       DV  PRED
##    &lt;dbl&gt; &lt;dbl&gt;
##  1  61.0  60.9
##  2  91.0  78.9
##  3 122.   83.5
##  4 126.   82.8
##  5  84.7  76.2
##  6  62.1  68.7
##  7  49.1  62.7
##  8  64.2  56.0
##  9  59.6  46.9
## 10  45.3  34.1
## # … with 3,132 more rows</code></pre>
<p>The overall philosophy of the package is to pass in data with these expected column names and receive a plot back. We will see how we can customize some aspects of the plots. But overall, the idea is that the function determines the look and feel of the plot. If you find yourself wanting a lot of creative customization then the suggestion is to work with plain old ggplot2 to make the plot</p>
</div>
<div id="other-plots" class="section level1">
<h1 class="hasAnchor">
<a href="#other-plots" class="anchor"></a>Other plots</h1>
<p>There are a lot of plotting functions in pmplots, but the naming is systematic so that you can know the output from the name.</p>
<p>Similarly,</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="../reference/cwres_time.html">cwresi_time</a></span>(<span class="no">data</span>)</pre></body></html></div>
<pre><code>## `geom_smooth()` using formula 'y ~ x'</code></pre>
<p><img src="pmplots_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<p>gives you conditional weighted residuals versus time.</p>
<p>And you can get different types of histogram plots</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="fu"><a href="../reference/res_hist.html">cwresi_hist</a></span>(<span class="no">data</span>)</pre></body></html></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="pmplots_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
</div>
<div id="specifying-data-and-axis-title" class="section level1">
<h1 class="hasAnchor">
<a href="#specifying-data-and-axis-title" class="anchor"></a>Specifying data and axis title</h1>
<p>Let’s look at <code>cwresi_time</code> function and look at the basic inputs for the plot</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/formals.html">formals</a></span>(<span class="no">cwresi_time</span>)[<span class="fl">1</span>:<span class="fl">3</span>]</pre></body></html></div>
<pre><code>## $df
## 
## 
## $x
## pm_axis_time()
## 
## $y
## pm_axis_cwresi()</code></pre>
<p>The first argument is <code>df</code> , the data set in data.frame format. The second argument is <code>x</code> or what goes on the x-axis, and third <code>y</code>, what goes on the <code>y</code> axis. The defaults for these arguments are the output from internal pmplots functions</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="kw pkg">pmplots</span><span class="kw ns">:::</span><span class="fu"><a href="../reference/pm_axis_functions.html">pm_axis_time</a></span>()</pre></body></html></div>
<pre><code>## [1] "TIME//Time {xunit}"</code></pre>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="kw pkg">pmplots</span><span class="kw ns">:::</span><span class="fu"><a href="../reference/pm_axis_functions.html">pm_axis_cwresi</a></span>()</pre></body></html></div>
<pre><code>## [1] "CWRESI//CWRES with interaction"</code></pre>
<p>For <code>x</code>, we have the name of the column in the data set (<code>TIME</code>) followed by a double-front-slash (<code>//</code>) and then the name that we want to go on the x-axis (<code>Time</code>). Similarly for y, the data is in column <code>CWRESI</code> and we want the y-axis title to be <code>Conditional weighted residual</code>.</p>
<p>This is called <code>col_label</code> format, and is a simple way to pass in both pieces of data.</p>
<p>If we wanted to modify either the data column name or the name of the axis title, simply provide a replacement for the default</p>
<div class="sourceCode" id="cb21"><html><body><pre class="r"><span class="fu"><a href="../reference/cwres_time.html">cwresi_time</a></span>(<span class="no">data</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">"CWRESI//Some other axis title"</span>)</pre></body></html></div>
<pre><code>## `geom_smooth()` using formula 'y ~ x'</code></pre>
<p><img src="pmplots_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<p>And if you omit the title from the <code>col_label</code>, the title will be the column name</p>
<div class="sourceCode" id="cb23"><html><body><pre class="r"><span class="fu"><a href="../reference/cwres_time.html">cwresi_time</a></span>(<span class="no">data</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">"CWRESI"</span>)</pre></body></html></div>
<pre><code>## `geom_smooth()` using formula 'y ~ x'</code></pre>
<p><img src="pmplots_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<p>Notice that the <code>x</code> argument had another piece in it … <code>{xunit}</code></p>
<div class="sourceCode" id="cb25"><html><body><pre class="r"><span class="kw pkg">pmplots</span><span class="kw ns">:::</span><span class="fu"><a href="../reference/pm_axis_functions.html">pm_axis_time</a></span>()</pre></body></html></div>
<pre><code>## [1] "TIME//Time {xunit}"</code></pre>
<p>Looking at the <code>y_time</code> help topic, we see that <code>xunit</code> is the time unit for these plots. So, if our data has time unit of days, we can change that aspect of the plot</p>
<div class="sourceCode" id="cb27"><html><body><pre class="r"><span class="fu"><a href="../reference/cwres_time.html">cwresi_time</a></span>(<span class="no">data</span>, <span class="kw">xunit</span> <span class="kw">=</span> <span class="st">"days"</span>)</pre></body></html></div>
<pre><code>## `geom_smooth()` using formula 'y ~ x'</code></pre>
<p><img src="pmplots_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Kyle T Baron.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
